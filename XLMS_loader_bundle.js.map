{"version":3,"file":"XLMS_loader_bundle.js","sources":["dist/constants.js","dist/XLMS_loader.js"],"sourcesContent":["/**\n * 'Magic' constant strings collected in one place.\n */\nexport const session_data_identifier = \"session_data\";\nexport const redirect_identifier = \"redirect_URL\";\nexport const endpoint_identifier = \"endpoint\";\nconst vendorId = 1209;\nexport const pokey_device_filter = {\n    vendorId,\n    productId: 2800\n};\nexport const peggy_device_filter = {\n    vendorId,\n    productId: 2801\n};\n//# sourceMappingURL=constants.js.map","/**\n * Prepare the session data for the exercise & launch the plugin app.\n */\nimport { session_data_identifier, redirect_identifier, endpoint_identifier } from \"./constants\";\nasync function fetch_session_data(endpoint) {\n    // const endpoint = new URLSearchParams(document.location.search.substring(1)).get(endpoint_identifier) || '';\n    return fetch(new URL(endpoint).href).then(response => response.json());\n}\nfunction store_session(session_data, redirect, endpoint) {\n    sessionStorage.setItem(session_data_identifier, JSON.stringify(session_data));\n    sessionStorage.setItem(redirect_identifier, redirect);\n    sessionStorage.setItem(endpoint_identifier, endpoint);\n}\n/**\n * Initialize Plugin: Fetch REST data, store it, then redirect to plugin.\n *\n * @param {string} endpoint REST API endpoint URL\n * @param {string} redirect URL used by plugin to redirect user after exercise.\n * @returns {Promise<void>}\n */\nasync function initialize(endpoint, redirect) {\n    const REST_data = await fetch_session_data(endpoint);\n    store_session(REST_data, redirect, endpoint);\n    location.assign(new URL(REST_data.interface).href);\n}\nconst endpoint = new URLSearchParams(document.location.search.substring(1)).get(endpoint_identifier) || '';\nconst redirect = document.referrer.replace('/take', '');\nwindow.onload = () => initialize(endpoint, redirect);\n//# sourceMappingURL=XLMS_loader.js.map"],"names":[],"mappings":"AAAA;;;AAGA,AAAO,MAAM,uBAAuB,GAAG,cAAc,CAAC;AACtD,AAAO,MAAM,mBAAmB,GAAG,cAAc,CAAC;AAClD,AAAO,MAAM,mBAAmB,GAAG,UAAU,CAAC;;ACL9C;;;AAGA,AACA,eAAe,kBAAkB,CAAC,QAAQ,EAAE;;IAExC,OAAO,KAAK,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;CAC1E;AACD,SAAS,aAAa,CAAC,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACrD,cAAc,CAAC,OAAO,CAAC,uBAAuB,EAAE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;IAC9E,cAAc,CAAC,OAAO,CAAC,mBAAmB,EAAE,QAAQ,CAAC,CAAC;IACtD,cAAc,CAAC,OAAO,CAAC,mBAAmB,EAAE,QAAQ,CAAC,CAAC;CACzD;;;;;;;;AAQD,eAAe,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE;IAC1C,MAAM,SAAS,GAAG,MAAM,kBAAkB,CAAC,QAAQ,CAAC,CAAC;IACrD,aAAa,CAAC,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC7C,QAAQ,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;CACtD;AACD,MAAM,QAAQ,GAAG,IAAI,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,mBAAmB,CAAC,IAAI,EAAE,CAAC;AAC3G,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;AACxD,MAAM,CAAC,MAAM,GAAG,MAAM,UAAU,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC"}